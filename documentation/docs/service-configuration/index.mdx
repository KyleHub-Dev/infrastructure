---
title: Service Configuration Overview
sidebar_position: 1
description: Configure and expose services after deploying both stacks
---

# Service Configuration

After deploying both the Gateway VPS and Homelab Core stacks, complete these configuration steps to expose and protect your services.

---

## Configuration Order

```mermaid
flowchart TD
    A[VPS Deployed + Zitadel Configured] --> B[Homelab Deployed]
    B --> C[NEWT Connected]
    C --> D[Expose First Service]
    D --> E[Configure SSO]
    E --> F[Add More Services]
```

:::info Prerequisites
Before starting service configuration, ensure you've completed:
- [Gateway VPS Setup](/docs/gateway-vps) â€” including Zitadel configuration
- [Homelab Setup](/docs/homelab) â€” with NEWT connected
:::

---

## Configuration Checklist

### âœ… Verify Deployments

| Check | Command/Action |
|-------|----------------|
| VPS containers healthy | `docker compose ps` on VPS |
| Pangolin accessible | Open `https://pangolin.yourdomain.com` |
| Zitadel accessible | Open `https://auth.yourdomain.com` |
| Homelab containers running | `docker compose ps` on homelab |
| NEWT connected | Check Pangolin dashboard |

### ðŸ”§ Complete Configuration

1. **[Expose Services](./expose-services)** â€” Add resources to Pangolin
2. **[Configure SSO](./configure-sso)** â€” Protect services with Zitadel authentication
3. **[Zitadel Domain Setup](./zitadel-domain)** â€” Configure custom domain in Zitadel

---

## Understanding the Flow

### Service Exposure

When you expose a service through Pangolin:

```
1. User requests â†’ https://myservice.yourdomain.com
2. Cloudflare DNS â†’ Points to VPS IP
3. Traefik â†’ Terminates SSL, routes to Pangolin
4. Pangolin â†’ Checks auth (if enabled)
5. Gerbil â†’ Sends through WireGuard tunnel
6. NEWT â†’ Forwards to local service
7. Service â†’ Responds
```

### Authentication Flow

When SSO is enabled for a resource:

```
1. User requests service
2. Pangolin checks for valid session
3. If no session â†’ Redirect to Zitadel
4. User logs in to Zitadel
5. Zitadel returns token with roles
6. Pangolin validates roles
7. If authorized â†’ Allow access
```

---

## Quick Links

| Task | Guide |
|------|-------|
| Add a service to Pangolin | [Expose Services](./expose-services) |
| Require login for a service | [Configure SSO](./configure-sso) |
| Set up Zitadel domain | [Zitadel Domain Setup](./zitadel-domain) |
